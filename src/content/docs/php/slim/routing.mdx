---
title: Routing in Slim Framework
description: Working with Routing in Slim Framework
sidebar:
  label: 'Routing in Slim Framework'
  order: 2
  badge:
    text: New!
    variant: danger
---

## What is Routing?

- **Routing** is the process of redirecting requests to the appropriate code that should handle them.
    - When someone visits your website (like typing `/users` or `/products` in their browser), the router determines which piece of code should handle that request.
- Routing is like having a receptionist at a hotel who directs guests to the right room. 

--- 

## Core Routing Concepts

Web application routes define how an application responds to client requests based on specific **URLs** and **HTTP methods**. They act as a mapping system, directing incoming requests to the appropriate code or resources for processing and generating a response.

In **server-side routing**, the application defines a set of routes that map URL patterns to specific handlers. Each route typically consists of:

### 1. HTTP method
Modern routing systems distinguish between different HTTP methods (GET, POST, PUT, DELETE, etc.) for the same URL path.
2. **URL pattern** (which may include parameters)
3. **Handler function** or controller that processes the request.

---

### 2. URL Patterns
Routes are associated with specific URL patterns. These patterns can be:
* **Static**: Exact paths, e.g., `/about`, `/contact`.
* **Dynamic (with parameters)**: Paths like `/users/:id`, where `:id` is a placeholder for a variable value.
* **Wildcard**: Patterns like `/files/*`, which match any path segment after a certain point.

### 3. Handler Responses
Each route is linked to a **handler function** or **controller method**, which contains the logic to process the request and generate a response. The response could be:
* An **HTML page**
* **JSON data**
* A **file download**
* A **redirect**

:::note[note]
- Routes can capture dynamic segments from URLs (like user IDs or slugs) and pass them to handlers.
- In traditional server-side routing, each navigation typically involves a full page reload.
:::

---

## Key Benefits of Server-Side Routing

- **Clean URLs**: Routes enable friendly, semantic URLs like `/user/123` instead of `/index.php?page=user&id=123`
- **Separation of concerns**: Each route handler focuses on a specific functionality, making code more organized and maintainable.
- **Parameter extraction**: Routers automatically extract parameters from URLs and make them available to handlers.
- **HTTP method handling**: Different HTTP methods (GET, POST, PUT, DELETE) can be handled by different functions for the same URL.
- **Middleware support**: Common functionality like authentication, logging, or CORS can be applied to routes through middleware.

---

## Modern Routing Features

- **Route caching**: Production applications often cache compiled routes for better performance.
- **Route model binding**: Some frameworks automatically resolve route parameters to model instances.
- **Named routes**: Routes can be given names for easier **URL generation** in templates and **redirects**.
- **Route constraints**: Parameters can have validation rules (regex patterns, type constraints).

---

## How Slim Routing Works

When a request comes in, Slim's router:

1. **Matches the HTTP method** (GET, POST, etc.),
2. **Compares the URL path** against defined route patterns,
3. **Extracts parameters** from the URL if the route has placeholders
4. **Executes middleware** if any is defined for the route,
5. **Calls the route handler** with the request, response, and extracted parameters,
6. **Returns the response** to the client.

---

## Setting Up Slim Framework

First, let's set up a basic Slim application:

```php
<?php
require_once 'vendor/autoload.php';

use Slim\Factory\AppFactory;
use Psr\Http\Message\ResponseInterface as Response;
use Psr\Http\Message\ServerRequestInterface as Request;

// Create Slim app instance
$app = AppFactory::create();

// Your routes go here...

// Run the application
$app->run();
```

---

## Basic Routes

### Simple GET Route

The most basic route responds to GET requests:

```php
$app->get('/', function (Request $request, Response $response, $args) {
    $response->getBody()->write("Welcome to the homepage!");
    return $response;
});

// Simple GET route
$app->get('/dashboard', function (Request $request, Response $response, $args) {
    $response->getBody()->write("Welcome to the dashboard!");
    return $response;
});
```

### POST Route for Form Handling

Handle form submissions with POST routes:

```php
$app->post('/contact', function (Request $request, Response $response, $args) {
    $parsedBody = $request->getParsedBody();
    $name = $parsedBody['name'] ?? '';
    $email = $parsedBody['email'] ?? '';

    // Process form data here
    $response->getBody()->write("Thank you " . $name . " for contacting us!");
    return $response;
});
```

---

## Route Parameters

### Required Parameters

Capture dynamic parts of URLs using curly braces:

```php
$app->get('/user/{id}', function (Request $request, Response $response, $args) {
    $userId = $args['id'];
    $response->getBody()->write("User ID: " . $userId);
    return $response;
});
```

### Optional Parameters

Make parameters optional using square brackets:

```php
$app->get('/products[/{category}]', function (Request $request, Response $response, $args) {
    $category = $args['category'] ?? 'all';
    $response->getBody()->write("Showing products in category: " . $category);
    return $response;
});
```

### Parameter Constraints

Add validation rules using regular expressions:

```php
$app->get('/article/{id:[0-9]+}', function (Request $request, Response $response, $args) {
    $articleId = $args['id'];
    $response->getBody()->write("Article ID: " . $articleId);
    return $response;
});
```

---

## Route Groups

Organize related routes with common prefixes:

```php
$app->group('/admin', function ($group) {
    $group->get('/dashboard', function (Request $request, Response $response, $args) {
        // Display admin dashboard
        $response->getBody()->write("Welcome to the Admin Dashboard");
        return $response;
    });

    $group->get('/users', function (Request $request, Response $response, $args) {
        // Display user management page
        $response->getBody()->write("User Management Panel");
        return $response;
    });

    $group->get('/settings', function (Request $request, Response $response, $args) {
        // Display admin settings
        $response->getBody()->write("Admin Settings Panel");
        return $response;
    });

    $group->post('/users/{id}/ban', function (Request $request, Response $response, $args) {
        $userId = $args['id'];
        // Ban user logic here
        $response->getBody()->write("User " . $userId . " has been banned");
        return $response;
    });
});
```

---

## Middleware

Add functionality that runs before your route handlers:

```php
$app->add(function (Request $request, Response $response, $next) {
    $response = $next($request, $response);
    return $response->withHeader('X-Custom-Header', 'My Custom Value');
});
```

---

## Error Handling

Handle 404 errors and other unmatched routes:

```php
$app->map(['GET', 'POST', 'PUT', 'DELETE', 'PATCH'], '/{routes:.+}', function($request, $response) {
    $response->getBody()->write('404 - Page not found');
    return $response->withStatus(404);
});
```

